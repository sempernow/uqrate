!function(e,t){"use strict";window.addEventListener("load",()=>{const e=(e,...t)=>console.log(`❤ [${(new Date).toISOString().substring(17)}] [uqrate.js]`,e,...t),t=e=>document.getElementById(e),n=t("uqrate-iframe-container")||document.createElement("BOGUS"),a=`https://swarm.foo/m/embed/${n.dataset.msgId}`,i=e=>({chnOwner:n.dataset.chnOwner,chnSlug:n.dataset.chnSlug,msgId:n.dataset.msgId,msgTitle:n.dataset.msgTitle,msgSummary:n.dataset.msgSummary,chnId:e}),r={str:`\n                    <iframe \n                        id="uqrate-iframe" \n                        name="uqrate" \n                        title="uqrate.org" \n                        tabindex="0" \n                        src="${a}" \n                        width="100%"\n                        height="800"\n                        scrolling="yes"  \n                        horizontalscrolling="no" \n                        verticalscrolling="no" \n                        frameborder="0"></iframe>\n                    `,virgin:!0};if(n&&(n.innerHTML=r.str)&&(r.node=t("uqrate-iframe")),!r.node){const t="Failed to render : #uqrate-iframe";return n.innerHTML=`<h2><code>${t}</code></h2>`,void e(t)}window.addEventListener("message",t=>{if(-1===a.indexOf(t.origin))return;const n=+r.node.height;n<t.data.height&&(r.node.height=t.data.height+50),e("Got msg from IFRAME:",{data:t.data,heightNew:+r.node.height,match:t.source===a,origin:t.origin,source:t.source,target:t.target}),r.virgin&&t.source.postMessage({event:"load",height:{old:n,new:+r.node.height},origin:t.origin,dataset:i(t.data.state.channel.chn_id)},a)},!1),e("iframe height :",+r.node.height),e("iframe src :",a),r.node&&window.setTimeout(()=>{r.node.contentWindow&&r.node.contentWindow.postMessage("debug : async post from parent",a)},2e3)})}();
